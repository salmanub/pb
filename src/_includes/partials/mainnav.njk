{% set lang = locale | default('es') %}
{% set currentPath = page.url %}
{% set isHome = currentPath == "/" or currentPath == "/en/" or currentPath == "/en" or currentPath == "/ca/" or currentPath == "/ca" %}
{% set phoneNumber = "+34 614 194 985" %}

{% set languages = {
    "es": "Español",
    "en": "English",
    "ca": "Català"
} %}

{% set mainMenu = [
    {
        "name": (lang == 'es') ? "Inicio" : ((lang == 'en') ? "Home" : "Inici"),
        "path": (lang == 'es') ? "/" : "/" + lang,
        "icon": "home"
    },
    {
        "name": (lang == 'es') ? "Servicios" : ((lang == 'en') ? "Services" : "Serveis"),
        "path": (lang == 'es') ? "/servicios" : "/" + lang + "/servicios",
        "icon": "file-text",
        "hasDropdown": true
    },
    {
        "name": (lang == 'es') ? "Casos" : ((lang == 'en') ? "Cases" : "Casos"),
        "path": (lang == 'es') ? "/casos" : "/" + lang + "/casos",
        "icon": "book-open"
    },
    {
        "name": (lang == 'es') ? "Blog" : "Blog",
        "path": (lang == 'es') ? "/blog" : "/" + lang + "/blog",
        "icon": "message-square"
    },
    {
        "name": (lang == 'es') ? "Contacto" : ((lang == 'en') ? "Contact" : "Contacte"),
        "path": (lang == 'es') ? "/contacto" : "/" + lang + "/contacto",
        "icon": "users"
    }
] %}

{% set services = [
    {
        "name": (lang == 'es') ? "Empresas" : ((lang == 'en') ? "Business" : "Empreses"),
        "description": (lang == 'es') ? "Peritajes para empresas" : ((lang == 'en') ? "Expert reports for companies" : "Peritatges per a empreses"),
        "path": (lang == 'es') ? "empresas" : lang + "/empresas",
        "icon": "building-2"
    },
    {
        "name": (lang == 'es') ? "Particulares" : ((lang == 'en') ? "Private" : "Particulars"),
        "description": (lang == 'es') ? "Peritajes para particulares" : ((lang == 'en') ? "Expert reports for individuals" : "Peritatges per a particulars"),
        "path": (lang == 'es') ? "particulares" : lang + "/particulares",
        "icon": "home"
    },
    {
        "name": (lang == 'es') ? "Judiciales" : ((lang == 'en') ? "Legal" : "Judicials"),
        "description": (lang == 'es') ? "Peritajes judiciales" : ((lang == 'en') ? "Legal expert reports" : "Peritatges judicials"),
        "path": (lang == 'es') ? "judiciales" : lang + "/judiciales",
        "icon": "scale"
    },
    {
        "name": (lang == 'es') ? "Tasaciones" : ((lang == 'en') ? "Valuation" : "Taxacions"),
        "description": (lang == 'es') ? "Valoraciones y tasaciones" : ((lang == 'en') ? "Valuations and appraisals" : "Valoracions i taxacions"),
        "path": (lang == 'es') ? "tasaciones" : lang + "/tasaciones",
        "icon": "calculator"
    },
    {
        "name": (lang == 'es') ? "Construcción" : ((lang == 'en') ? "Construction" : "Construcció"),
        "description": (lang == 'es') ? "Peritajes de construcción" : ((lang == 'en') ? "Construction expert reports" : "Peritatges de construcció"),
        "path": (lang == 'es') ? "construccion" : lang + "/construccion",
        "icon": "hammer"
    }
] %}

<header id="mainHeader" class="fixed left-0 right-0 top-0 z-50 transition-all duration-300 {% if isHome %}bg-gradient-to-r from-blue-600 to-blue-800{% endif %}">
    <div class="absolute inset-0 transition-colors duration-300 nav-bg"></div>
    
    <div class="container mx-auto">
        <!-- Top Bar - Solo visible en desktop -->
        <div class="relative h-12 hidden lg:flex items-center justify-end border-b border-white/10 top-bar transition-all duration-300">
            <!-- Language Selector -->
            <div class="flex items-center gap-1 px-4 border-l border-white/10">
                {% for code, name in languages %}
                    <a href="{{ code == 'es' ? '/' : '/' + code }}"
                       class="px-3 py-1 text-xs uppercase tracking-wide font-medium rounded-md transition-colors
                       {{ code == lang ? '!text-white bg-blue-600 hover:bg-blue-700 shadow-sm' : 
                           (isHome ? 'text-white/80 hover:text-white hover:bg-white/10' : 
                           'text-gray-600 hover:text-blue-600 bg-gray-50/50 hover:bg-gray-100') }}">
                        {{ code }}
                    </a>
                {% endfor %}
            </div>
            <!-- CTAs con traducciones -->
            <div class="flex items-center border-l border-white/10">
                <a href="tel:{{ phoneNumber }}" 
                   class="px-4 py-2 text-sm text-white/90 hover:text-white flex items-center gap-2 border-r border-white/10">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                    <span>{{ phoneNumber }}</span>
                </a>
                <a href="/presupuesto"
                   class="px-4 py-2 text-sm font-medium text-white bg-white/10 hover:bg-white/20 transition-colors">
                    {{ lang == 'es' ? 'SOLICITAR PRESUPUESTO' : (lang == 'en' ? 'REQUEST QUOTE' : 'SOL·LICITAR PRESSUPOST') }}
                </a>
            </div>
        </div>

        <!-- Main Bar -->
        <div class="relative h-16 md:h-20 flex items-center justify-between">
            <!-- Logo -->
            <a href="/" class="flex items-center gap-2 lg:gap-3 shrink-0 group">
                <svg
                    class="h-8 w-auto sm:h-9 lg:h-10 nav-logo-color transition-all duration-300"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 375 374.999991"
                    preserveAspectRatio="xMidYMid meet"
                >
                    <defs>
                        <!-- ...existing code... -->
                    </defs>

                    <g clip-path="url(#2717b77dc4)">
                        <!-- ...existing code... -->
                    </g>

                    <!-- ...existing code... -->
                </svg>
                <span class="text-xl sm:text-2xl font-bold whitespace-nowrap nav-logo-color transition-all duration-300">Perito Barcelona</span>
            </a>

            <!-- Mobile CTA + Menu Button -->
            <div class="flex items-center gap-3 lg:hidden">
                <!-- CTA solo visible si hay espacio (breakpoint sm) -->
                <a href="/presupuesto"
                   class="hidden sm:inline-flex px-4 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap
                   {{ isHome ? 'bg-white text-blue-600 hover:bg-blue-50' : 'bg-blue-600 text-white hover:bg-blue-700' }}">
                    {{ lang == 'es' ? 'SOLICITAR' : (lang == 'en' ? 'REQUEST' : 'SOL·LICITAR') }}
                </a>
                
                <button class="relative z-50 w-10 h-10 flex items-center justify-center"
                        id="menuButton"
                        aria-label="Toggle menu">
                    <svg class="w-6 h-6 menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>

            <!-- Desktop Navigation -->
            <div class="hidden lg:flex flex-1 items-center justify-end gap-6">
                <nav class="hidden lg:flex items-center space-x-8">
                    {% for item in mainMenu %}
                        <div class="relative group">
                            <a href="{{ item.path }}" 
                               class="flex items-center gap-2 py-2 font-medium text-sm uppercase tracking-wide transition-colors
                               hover:text-white text-white/80
                               {{ currentPath == item.path ? 'text-white' : '' }}">
                                <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    {% if item.icon == 'home' %}
                                    <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                                    {% elif item.icon == 'file-text' %}
                                    <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/>
                                    {% elif item.icon == 'book-open' %}
                                    <path d="M12 7v14"/><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/>
                                    {% elif item.icon == 'message-square' %}
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                                    {% elif item.icon == 'users' %}
                                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                    {% endif %}
                                </svg>
                                <span>{{ item.name }}</span>
                                {% if item.hasDropdown %}
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 transition-transform group-hover:rotate-180"><path d="m6 9 6 6 6-6"/></svg>
                                {% endif %}
                            </a>
                            {% if item.hasDropdown %}
                                <div class="absolute top-full left-0 w-72 pt-4 opacity-0 translate-y-2 pointer-events-none
                                            group-hover:opacity-100 group-hover:translate-y-0 group-hover:pointer-events-auto
                                            transition-all duration-200">
                                    <div class="bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden">
                                        {% for service in services %}
                                            <a href="/servicios/{{ service.path }}" 
                                               class="flex items-center gap-3 p-4 hover:bg-gray-50 transition-colors">
                                                <svg class="w-5 h-5 !text-blue-600 shrink-0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    {% if service.icon == 'building-2' %}
                                                    <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/><path d="M10 6h4"/><path d="M10 10h4"/><path d="M10 14h4"/><path d="M10 18h4"/>
                                                    {% elif service.icon == 'home' %}
                                                    <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                                                    {% elif service.icon == 'scale' %}
                                                    <path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="M7 21h10"/><path d="M12 3v18"/><path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"/>
                                                    {% elif service.icon == 'calculator' %}
                                                    <rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/>
                                                    {% elif service.icon == 'hammer' %}
                                                    <path d="m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9"/><path d="M17.64 15 22 10.64"/><path d="m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91"/>
                                                    {% endif %}
                                                </svg>
                                                <div>
                                                    <span class="block font-medium text-gray-900">{{ service.name }}</span>
                                                    <span class="text-sm text-gray-500">{{ service.description }}</span>
                                                </div>
                                            </a>
                                        {% endfor %}
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                    {% endfor %}
                </nav>
            </div>
        </div>
    </div>
</header>

<!-- Mobile Menu con scroll propio -->
<div class="fixed inset-0 z-40 hidden lg:hidden overflow-hidden" id="mobileMenu">
    <div class="absolute inset-0 bg-blue-600/95 backdrop-blur-sm"></div>
    <nav class="relative h-full flex flex-col">
        <!-- Header fijo -->
        <div class="pt-24 px-6"></div>
        
        <!-- Contenido scrollable -->
        <div class="flex-1 overflow-y-auto px-6 pb-6">
            <!-- Primary Actions - CTA siempre visible en móvil pequeño -->
            <div class="flex flex-col gap-4 mb-8">
                <a href="tel:{{ phoneNumber }}"
                   class="flex items-center justify-center gap-2 py-3 bg-white text-blue-600 rounded-xl hover:bg-blue-50 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                    <span class="font-medium">{{ lang == 'es' ? 'Llamar ahora' : (lang == 'en' ? 'Call now' : 'Trucar ara') }}</span>
                </a>
                <a href="/presupuesto"
                   class="sm:hidden flex items-center justify-center py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-400 transition-colors">
                    <span class="font-medium">{{ lang == 'es' ? 'Solicitar presupuesto' : (lang == 'en' ? 'Request quote' : 'Sol·licitar pressupost') }}</span>
                </a>
            </div>

            <!-- Main Navigation con máximo height -->
            <div class="flex flex-col space-y-1">
                {% for item in mainMenu %}
                    <div class="mobile-menu-item">
                        <button class="w-full flex items-center justify-between px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors">
                            <div class="flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                                    {% if item.icon == 'home' %}
                                    <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                                    {% elif item.icon == 'file-text' %}
                                    <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/>
                                    {% elif item.icon == 'book-open' %}
                                    <path d="M12 7v14"/><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/>
                                    {% elif item.icon == 'message-square' %}
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                                    {% elif item.icon == 'users' %}
                                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                    {% endif %}
                                </svg>
                                <span class="font-medium">{{ item.name }}</span>
                            </div>
                            {% if item.hasDropdown %}
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="m6 9 6 6 6-6"/></svg>
                            {% endif %}
                        </button>
                        
                        {% if item.hasDropdown %}
                            <div class="pl-4 py-2 space-y-1">
                                {% for service in services %}
                                    <a href="/servicios/{{ service.path }}"
                                       class="flex items-center gap-2 px-4 py-3 text-white/90 hover:text-white hover:bg-white/10 rounded-lg transition-colors">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                                            <!-- Iconos de servicios... -->
                                        </svg>
                                        <span>{{ service.name }}</span>
                                    </a>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Footer fijo -->
        <div class="p-6 border-t border-white/10">
            <div class="flex justify-center gap-2">
                {% for code, name in languages %}
                    <a
                        href="{{ code == 'es' ? '/' : '/' + code }}"
                        class="px-3 py-2 text-sm rounded-md transition-colors
                        {{ code == lang ? 'bg-white/20 text-white' : 'text-white/80 hover:bg-white/10' }}"
                    >
                        {{ name }}
                    </a>
                {% endfor %}
            </div>
        </div>
    </nav>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const header = document.getElementById('mainHeader');
        const menuButton = document.getElementById('menuButton');
        const mobileMenu = document.getElementById('mobileMenu');
        let isMenuOpen = false;

        // Función para actualizar estilos de navegación
        const updateNavStyles = () => {
            const isScrolled = window.scrollY > 50;
            if (header) {
                header.classList.toggle('is-scrolled', isScrolled);
                
                if ({{ isHome | json }}) {
                    header.classList.toggle('from-blue-600', !isScrolled);
                    header.classList.toggle('to-blue-800', !isScrolled);
                    header.classList.toggle('bg-gradient-to-r', !isScrolled);
                }
            }
        };

        // Inicializar estilos
        window.addEventListener('scroll', updateNavStyles);
        updateNavStyles();

        // Control del menú móvil
        if (menuButton && mobileMenu) {
            menuButton.addEventListener('click', function() {
                isMenuOpen = !isMenuOpen;
                if (isMenuOpen) {
                    document.body.style.overflow = 'hidden';
                    mobileMenu.classList.remove('hidden');
                    menuButton.innerHTML = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 6l12 12M6 18L18 6"/>
                    </svg>`;
                } else {
                    document.body.style.overflow = '';
                    mobileMenu.classList.add('hidden');
                    menuButton.innerHTML = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>`;
                }
            });
        }

        // Expandir/contraer elementos del menú móvil
        document.querySelectorAll('.mobile-menu-item button').forEach(button => {
            button.addEventListener('click', function() {
                const parent = this.closest('.mobile-menu-item');
                const dropdown = parent.querySelector('div');
                if (dropdown) {
                    const expanded = this.getAttribute('data-expanded') === 'true';
                    this.setAttribute('data-expanded', expanded ? 'false' : 'true');
                    dropdown.classList.toggle('hidden', expanded);
                    const chevron = this.querySelector('svg:last-child');
                    if (chevron) {
                        chevron.style.transform = expanded ? 'rotate(0deg)' : 'rotate(180deg)';
                    }
                }
            });
        });
    });
</script>

<style>
    /* Estilos base */
    .nav-bg {
        background: transparent;
        transition: all 0.3s;
    }

    /* Estados del header al scroll */
    #mainHeader.is-scrolled {
        background: none;
    }
    
    #mainHeader.is-scrolled .nav-bg {
        background-color: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(16px);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    /* Estado inicial (sin scroll) - TopBar */
    #mainHeader:not(.is-scrolled) .top-bar {
        border-color: rgba(255, 255, 255, 0.2);
    }

    #mainHeader:not(.is-scrolled) .top-bar a {
        color: rgba(255, 255, 255, 0.9);
    }

    #mainHeader:not(.is-scrolled) .top-bar a:hover {
        color: rgba(255, 255, 255, 1);
    }

    /* Estado con scroll - TopBar */
    #mainHeader.is-scrolled .top-bar {
        border-color: rgba(203, 213, 225, 0.2);
    }

    #mainHeader.is-scrolled .top-bar a {
        color: rgb(71, 85, 105);
    }

    #mainHeader.is-scrolled .top-bar a:hover {
        color: rgb(37, 99, 235);
    }

    /* Resto de estilos existentes */
    #mainHeader:not(.is-scrolled) {
        color: white;
    }

    #mainHeader:not(.is-scrolled) nav a,
    #mainHeader:not(.is-scrolled) .nav-icon,
    #mainHeader:not(.is-scrolled) .nav-logo-color {
        color: rgba(255, 255, 255, 0.9);
    }

    #mainHeader:not(.is-scrolled) nav a:hover,
    #mainHeader:not(.is-scrolled) .nav-icon:hover,
    #mainHeader:not(.is-scrolled) .nav-logo-color:hover {
        color: white;
    }

    /* Estado con scroll */
    #mainHeader.is-scrolled nav a,
    #mainHeader.is-scrolled .nav-icon,
    #mainHeader.is-scrolled .nav-logo-color {
        color: #374151;
    }

    #mainHeader.is-scrolled nav a:hover,
    #mainHeader.is-scrolled .nav-icon:hover,
    #mainHeader.is-scrolled .nav-logo-color:hover {
        color: #2563EB;
    }

    /* Ajustes para selector de idiomas y logo */
    .nav-logo-color {
        color: white;
        transition: color 0.3s;
    }

    #mainHeader.is-scrolled .nav-logo-color {
        color: #2563EB;
    }
</style>